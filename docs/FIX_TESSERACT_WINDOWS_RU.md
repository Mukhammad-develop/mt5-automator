# Исправление Tesseract OCR в Windows

Если вы видите ошибку `tesseract: Имя "tesseract" не распознано как имя командлета...`, это означает, что Tesseract установлен, но не добавлен в системную переменную PATH. Вот два способа исправить это:

## Способ 1: Добавить Tesseract в системную переменную PATH (Рекомендуется)

Это позволит использовать команду `tesseract` из любого места в PowerShell.

### Шаг 1: Найти путь установки Tesseract

Tesseract обычно устанавливается в одно из этих мест:
- `C:\Program Files\Tesseract-OCR\tesseract.exe`
- `C:\Program Files (x86)\Tesseract-OCR\tesseract.exe`

**Чтобы найти его:**
1. Откройте Проводник (File Explorer)
2. Перейдите в `C:\Program Files\` или `C:\Program Files (x86)\`
3. Найдите папку `Tesseract-OCR`
4. Внутри должен быть файл `tesseract.exe`

**Или используйте PowerShell для поиска:**
```powershell
Get-ChildItem -Path "C:\Program Files" -Filter "tesseract.exe" -Recurse -ErrorAction SilentlyContinue
Get-ChildItem -Path "C:\Program Files (x86)" -Filter "tesseract.exe" -Recurse -ErrorAction SilentlyContinue
```

### Шаг 2: Добавить в PATH

1. **Открыть свойства системы:**
   - Нажмите `Win + R`
   - Введите `sysdm.cpl` и нажмите Enter
   - Или: Правой кнопкой на "Этот компьютер" → Свойства → Дополнительные параметры системы

2. **Редактировать PATH:**
   - Нажмите кнопку "Переменные среды" (Environment Variables)
   - В разделе "Системные переменные" найдите `Path` и нажмите "Изменить" (Edit)
   - Нажмите "Создать" (New) и добавьте: `C:\Program Files\Tesseract-OCR` (или ваш реальный путь)
   - Нажмите "OK" во всех окнах

3. **Перезапустить PowerShell:**
   - Закройте все окна PowerShell
   - Откройте новое окно PowerShell
   - Проверьте: `tesseract --version`

## Способ 2: Обновить файл конфигурации (Проще, перезапуск не требуется)

Если вы не хотите изменять системную переменную PATH, просто укажите боту, где установлен Tesseract.

### Шаг 1: Найти путь к Tesseract

То же самое, что в Способе 1 - найдите, где находится `tesseract.exe`.

### Шаг 2: Обновить config.env

1. Откройте файл `config.env` в текстовом редакторе
2. Найдите строку с `TESSERACT_CMD` (или добавьте её, если её нет)
3. Установите полный путь к tesseract.exe:

```env
# Например, если Tesseract в стандартном месте:
TESSERACT_CMD=C:/Program Files/Tesseract-OCR/tesseract.exe
```

**Важно:** Используйте прямые слеши `/` или двойные обратные слеши `\\` в пути:
- ✅ `C:/Program Files/Tesseract-OCR/tesseract.exe`
- ✅ `C:\\Program Files\\Tesseract-OCR\\tesseract.exe`
- ❌ `C:\Program Files\Tesseract-OCR\tesseract.exe` (одиночный обратный слеш не сработает)

### Шаг 3: Проверить

Бот автоматически будет использовать этот путь. Перезапуск не требуется!

## Быстрая проверка

После исправления проверьте Tesseract:

**Если использовали Способ 1 (PATH):**
```powershell
tesseract --version
```

**Если использовали Способ 2 (Config):**
Бот автоматически будет использовать путь из конфига. Можно проверить, запустив:
```powershell
python test_system.py
```

## Устранение неполадок

### Ошибка "Файл не найден"

- Убедитесь, что путь правильный (проверьте в Проводнике)
- Используйте прямые слеши `/` в файле конфигурации
- Убедитесь, что `tesseract.exe` существует по этому пути

### Всё ещё не работает?

1. **Проверьте, действительно ли установлен Tesseract:**
   - Посмотрите в меню Пуск → папка Tesseract-OCR
   - Если видите ярлыки, значит он установлен

2. **Переустановите Tesseract:**
   - Скачайте с: https://github.com/UB-Mannheim/tesseract/wiki
   - Во время установки отметьте опцию "Add to PATH"
   - Это автоматически добавит его в PATH

3. **Используйте полный путь в конфиге:**
   - Даже если PATH не работает, способ с конфигом сработает
   - Просто убедитесь, что путь правильный

## Пример записи в config.env

```env
# Настройки OCR (если используете способ с конфигом)
TESSERACT_CMD=C:/Program Files/Tesseract-OCR/tesseract.exe
```

## Проверка работоспособности

Запустите набор тестов:
```powershell
python test_system.py
```

Если Tesseract настроен правильно, тесты OCR должны пройти (или хотя бы не выдать ошибку "не найдено").

## Дополнительная информация

- **Если путь содержит пробелы:** Обязательно используйте прямые слеши `/` или двойные обратные `\\`
- **Если Tesseract в другом месте:** Просто укажите правильный путь в `TESSERACT_CMD`
- **Проверка установки:** Если в меню Пуск есть папка Tesseract-OCR, значит он установлен

## Альтернативный способ проверки пути

Если не можете найти Tesseract, попробуйте:

1. Откройте меню Пуск
2. Найдите "Tesseract-OCR"
3. Правой кнопкой на любом ярлыке → "Расположение файла"
4. Это покажет, где установлен Tesseract

